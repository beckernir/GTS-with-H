{% extends 'base.html' %}

{% block title %}Create Training Course{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-sm mb-4">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0"><i class="fas fa-plus me-2"></i>Create Training Course</h3>
                </div>
                <div class="card-body">
                    {% if user.is_reb_officer or user.is_system_admin or user.is_school_admin %}
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        {{ form.non_field_errors }}
                        <h5 class="mb-3 mt-2 text-secondary">Basic Information</h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                {{ form.course_title.label_tag }}
                                {{ form.course_title }}
                            </div>
                            <div class="col-md-6 mb-3">
                                {{ form.category.label_tag }}
                                {{ form.category }}
                            </div>
                        </div>
                        <div class="mb-3">
                            {{ form.description.label_tag }}
                            {{ form.description }}
                        </div>
                        <div class="mb-3">
                            {{ form.learning_objectives.label_tag }}
                            {{ form.learning_objectives }}
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                {{ form.target_audience.label_tag }}
                                {{ form.target_audience }}
                            </div>
                            <div class="col-md-3 mb-3">
                                {{ form.course_level.label_tag }}
                                {{ form.course_level }}
                            </div>
                            <div class="col-md-3 mb-3">
                                {{ form.course_format.label_tag }}
                                {{ form.course_format }}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                {{ form.duration_hours.label_tag }}
                                {{ form.duration_hours }}
                            </div>
                            <div class="col-md-4 mb-3">
                                {{ form.max_participants.label_tag }}
                                {{ form.max_participants }}
                            </div>
                            <div class="col-md-4 mb-3">
                                {{ form.is_active.label_tag }}
                                {{ form.is_active }}
                            </div>
                        </div>
                        <h5 class="mb-3 mt-4 text-secondary">Course Content & Requirements</h5>
                        <div class="mb-3">
                            {{ form.course_materials.label_tag }}
                            {{ form.course_materials }}
                        </div>
                        <div class="mb-3">
                            {{ form.prerequisites.label_tag }}
                            {{ form.prerequisites }}
                        </div>
                        <div class="mb-3">
                            {{ form.certification_requirements.label_tag }}
                            {{ form.certification_requirements }}
                        </div>
                        <h5 class="mb-3 mt-4 text-secondary">Guide & Media</h5>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.video_url.id_for_label }}" class="form-label">
                                    <i class="fas fa-video me-1"></i> Training Video (YouTube/Vimeo link)
                                </label>
                                {{ form.video_url }}
                                {% if form.video_url.help_text %}<div class="form-text">{{ form.video_url.help_text }}
                                </div>{% endif %}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="{{ form.guide_document.id_for_label }}" class="form-label">
                                    <i class="fas fa-file-pdf me-1"></i> Guide Document (PDF/DOCX)
                                </label>
                                {{ form.guide_document }}
                                {% if form.guide_document.help_text %}<div class="form-text">{{
                                    form.guide_document.help_text }}</div>{% endif %}
                            </div>
                        </div>
                        <div class="d-flex justify-content-end mt-4">
                            <button type="submit" class="btn btn-primary me-2"><i
                                    class="fas fa-save me-1"></i>Submit</button>
                            <a href="{% url 'training:course_list' %}" class="btn btn-secondary">Back to Courses</a>
                        </div>
                    </form>
                    {% else %}
                    <div class="alert alert-danger mt-3">You are not authorized to create a training course.</div>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="col-lg-4 d-none d-lg-block">
            <div class="card shadow-sm sticky-top" style="top: 90px;">
                <div class="card-header bg-light">
                    <h6 class="mb-0"><i class="fas fa-lightbulb me-2 text-warning"></i>Tips for Creating a Great Course
                    </h6>
                </div>
                <div class="card-body small">
                    <ul class="mb-0 ps-3">
                        <li>Use a clear, descriptive title.</li>
                        <li>Provide a concise summary and objectives.</li>
                        <li>Attach a helpful video or document guide.</li>
                        <li>Set the course as active to make it visible.</li>
                        <li>Assign the course to the correct category.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}